/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/fl/Utils"],function(e){"use strict";function t(e){if(e&&e.indexOf(".Component")<0){e+=".Component"}return e}function n(e){if(e&&e.requests&&Array.isArray(e.requests)){return e.requests.find(function(e){return e.name==="sap.ui.fl.changes"})}}function r(e){var n=e.manifest;var r=e.componentData||{};if(r.startupParameters){if(Array.isArray(r.startupParameters["sap-app-id"])){return r.startupParameters["sap-app-id"][0]}}var i=n.getEntry?n.getEntry("sap.ui5"):n["sap.ui5"];if(i){if(i.appVariantId){return i.appVariantId}if(i.componentName){return t(i.componentName)}}return t(a(n))}function a(e){if(e){var t="${pro"+"ject.art"+"ifactId}";var n=e.getEntry?e.getEntry("sap.app"):e["sap.app"];var r=n&&n.id;if(r===t){if(e.getComponentName){return e.getComponentName()}if(e.name){return e.name}}return r}throw new Error("No Manifest received, descriptor changes are not possible")}var i={getAppIdFromManifest:a,getFlexReference:r,getFlexReferenceForControl:function(t){var n=e.getAppComponentForControl(t);return n&&r({manifest:n.getManifestObject(),componentData:n.getComponentData()})},getOvpEntry:function(e){return e.getEntry?e.getEntry("sap.ovp"):e["sap.ovp"]},getCacheKeyFromAsyncHints:function(e,t){var r=n(t);if(r&&r.reference===e){return r.cachebusterToken||"<NO CHANGES>"}},getPreviewSectionFromAsyncHints:function(e){var t=n(e);if(t){return t.preview}},getChangeManifestFromAsyncHints:function(e){var t=n(e);if(t){return false}return true},getBaseComponentNameFromManifest:function(e){var t=e.getEntry?e.getEntry("sap.ui5"):e["sap.ui5"];return t&&t.componentName||a(e)},isFlexExtensionPointHandlingEnabled:function(t){var n=e.getAppComponentForControl(t);return!!(n&&n.getManifestEntry("sap.ui5")&&n.getManifestEntry("sap.ui5").flexExtensionPointEnabled)}};return i});